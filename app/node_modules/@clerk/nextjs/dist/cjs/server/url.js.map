{"version":3,"sources":["../../../src/server/url.ts"],"sourcesContent":["// TODO: This is a partial duplicate of part of packages/clerk-js/src/utils/url.ts\n// TODO: To be removed when we can extract this utility to @clerk/shared\n\nexport const LEGACY_DEV_SUFFIXES = ['.lcl.dev', '.lclstage.dev', '.lclclerk.com'];\nexport const CURRENT_DEV_SUFFIXES = ['.accounts.dev', '.accountsstage.dev', '.accounts.lclclerk.com'];\n\nconst accountPortalCache = new Map<string, boolean>();\n\nexport function isDevAccountPortalOrigin(hostname: string): boolean {\n  if (!hostname) {\n    return false;\n  }\n\n  let res = accountPortalCache.get(hostname);\n\n  if (res === undefined) {\n    res = isLegacyDevAccountPortalOrigin(hostname) || isCurrentDevAccountPortalOrigin(hostname);\n    accountPortalCache.set(hostname, res);\n  }\n\n  return res;\n}\n\n// Returns true for hosts such as:\n// * accounts.foo.bar-13.lcl.dev\n// * accounts.foo.bar-13.lclstage.dev\n// * accounts.foo.bar-13.dev.lclclerk.com\nfunction isLegacyDevAccountPortalOrigin(host: string): boolean {\n  return LEGACY_DEV_SUFFIXES.some(legacyDevSuffix => {\n    return host.startsWith('accounts.') && host.endsWith(legacyDevSuffix);\n  });\n}\n\n// Returns true for hosts such as:\n// * foo-bar-13.accounts.dev\n// * foo-bar-13.accountsstage.dev\n// * foo-bar-13.accounts.lclclerk.com\n// But false for:\n// * foo-bar-13.clerk.accounts.lclclerk.com\nfunction isCurrentDevAccountPortalOrigin(host: string): boolean {\n  return CURRENT_DEV_SUFFIXES.some(currentDevSuffix => {\n    return host.endsWith(currentDevSuffix) && !host.endsWith('.clerk' + currentDevSuffix);\n  });\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGO,MAAM,sBAAsB,CAAC,YAAY,iBAAiB,eAAe;AACzE,MAAM,uBAAuB,CAAC,iBAAiB,sBAAsB,wBAAwB;AAEpG,MAAM,qBAAqB,oBAAI,IAAqB;AAE7C,SAAS,yBAAyB,UAA2B;AAClE,MAAI,CAAC,UAAU;AACb,WAAO;AAAA,EACT;AAEA,MAAI,MAAM,mBAAmB,IAAI,QAAQ;AAEzC,MAAI,QAAQ,QAAW;AACrB,UAAM,+BAA+B,QAAQ,KAAK,gCAAgC,QAAQ;AAC1F,uBAAmB,IAAI,UAAU,GAAG;AAAA,EACtC;AAEA,SAAO;AACT;AAMA,SAAS,+BAA+B,MAAuB;AAC7D,SAAO,oBAAoB,KAAK,qBAAmB;AACjD,WAAO,KAAK,WAAW,WAAW,KAAK,KAAK,SAAS,eAAe;AAAA,EACtE,CAAC;AACH;AAQA,SAAS,gCAAgC,MAAuB;AAC9D,SAAO,qBAAqB,KAAK,sBAAoB;AACnD,WAAO,KAAK,SAAS,gBAAgB,KAAK,CAAC,KAAK,SAAS,WAAW,gBAAgB;AAAA,EACtF,CAAC;AACH;","names":[]}