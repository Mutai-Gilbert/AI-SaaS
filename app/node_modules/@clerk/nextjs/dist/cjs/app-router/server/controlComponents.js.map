{"version":3,"sources":["../../../../src/app-router/server/controlComponents.tsx"],"sourcesContent":["import type { Protect as ProtectClientComponent } from '@clerk/clerk-react';\nimport React from 'react';\n\nimport { auth } from './auth';\n\nexport function SignedIn(props: React.PropsWithChildren) {\n  const { children } = props;\n  const { userId } = auth();\n  return userId ? <>{children}</> : null;\n}\n\nexport function SignedOut(props: React.PropsWithChildren) {\n  const { children } = props;\n  const { userId } = auth();\n  return userId ? null : <>{children}</>;\n}\n\ntype ProtectServerComponentProps = React.ComponentProps<typeof ProtectClientComponent>;\n\n/**\n * Use `<Protect/>` in order to prevent unauthenticated or unauthorized users from accessing the children passed to the component.\n *\n * Examples:\n * ```\n * <Protect permission=\"a_permission_key\" />\n * <Protect role=\"a_role_key\" />\n * <Protect condition={(has) => has({permission:\"a_permission_key\"})} />\n * <Protect condition={(has) => has({role:\"a_role_key\"})} />\n * <Protect fallback={<p>Unauthorized</p>} />\n * ```\n */\nexport function Protect(props: ProtectServerComponentProps) {\n  const { children, fallback, ...restAuthorizedParams } = props;\n  const { has, userId } = auth();\n\n  /**\n   * Fallback to UI provided by user or `null` if authorization checks failed\n   */\n  const unauthorized = <>{fallback ?? null}</>;\n\n  const authorized = <>{children}</>;\n\n  if (!userId) {\n    return unauthorized;\n  }\n\n  /**\n   * Check against the results of `has` called inside the callback\n   */\n  if (typeof restAuthorizedParams.condition === 'function') {\n    if (restAuthorizedParams.condition(has)) {\n      return authorized;\n    }\n    return unauthorized;\n  }\n\n  if (restAuthorizedParams.role || restAuthorizedParams.permission) {\n    if (has(restAuthorizedParams)) {\n      return authorized;\n    }\n    return unauthorized;\n  }\n\n  /**\n   * If neither of the authorization params are passed behave as the `<SignedIn/>`.\n   * If fallback is present render that instead of rendering nothing.\n   */\n  return authorized;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAAkB;AAElB,kBAAqB;AAEd,SAAS,SAAS,OAAgC;AACvD,QAAM,EAAE,SAAS,IAAI;AACrB,QAAM,EAAE,OAAO,QAAI,kBAAK;AACxB,SAAO,SAAS,6BAAAA,QAAA,2BAAAA,QAAA,gBAAG,QAAS,IAAM;AACpC;AAEO,SAAS,UAAU,OAAgC;AACxD,QAAM,EAAE,SAAS,IAAI;AACrB,QAAM,EAAE,OAAO,QAAI,kBAAK;AACxB,SAAO,SAAS,OAAO,6BAAAA,QAAA,2BAAAA,QAAA,gBAAG,QAAS;AACrC;AAgBO,SAAS,QAAQ,OAAoC;AAC1D,QAAM,EAAE,UAAU,UAAU,GAAG,qBAAqB,IAAI;AACxD,QAAM,EAAE,KAAK,OAAO,QAAI,kBAAK;AAK7B,QAAM,eAAe,6BAAAA,QAAA,2BAAAA,QAAA,gBAAG,YAAY,IAAK;AAEzC,QAAM,aAAa,6BAAAA,QAAA,2BAAAA,QAAA,gBAAG,QAAS;AAE/B,MAAI,CAAC,QAAQ;AACX,WAAO;AAAA,EACT;AAKA,MAAI,OAAO,qBAAqB,cAAc,YAAY;AACxD,QAAI,qBAAqB,UAAU,GAAG,GAAG;AACvC,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,MAAI,qBAAqB,QAAQ,qBAAqB,YAAY;AAChE,QAAI,IAAI,oBAAoB,GAAG;AAC7B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAMA,SAAO;AACT;","names":["React"]}